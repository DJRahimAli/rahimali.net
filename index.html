<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Rahim Ali's Website</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="resources/style.css">
	</head>
	
	<body>
			<img src="/assets/images/style/sLogo.png" class="prevent-select logo">
			
			<!-- Navigation bar -->
			<div class="prevent-select navbar">
				<div class="navbarItem"><a href="#home">Home</a></div>
				<div class="navbarItem"><a href="#blog">Blog</a></div>
				<div class="navbarDropdown">
					<a href="#misc">Misc</a>
					<div class="navbarDropdown-Content">
						<a href="#">Link 1</a>
						<a href="#">Link 2</a>
						<a href="#">Link 3</a>
					</div>
				</div>
				<div class="navbarItem"><a href="#about">About</a></div>
			</div>
			
			<!-- Main content -->
			<div class="main">
				<h1>Hello,</h1>
				<div class="content">
					<p>My name is Rahim Ali, I am a Programmer, Artist, Musician and 3D Animator from the UK.</p>
					<hr>
					<p>i am 4096 years old</p>
					<p>test</p>
				</div>
			</div>
			
			<!-- Related pages -->
			<div class="prevent-select relatedPages">
				<h2>Related pages:</h2>
				<div class="relatedPages-content">
					<a href="#misc">Misc</a>
				</div>
			</div>
			<br>
			<!-- Visitor counter -->
			<div class="prevent-select relatedPages">
				<h2>Total page views:</h2>
				<div class="relatedPages-content">
					<p id="stats"></p>
				</div>
			</div>
	</body>
</html>

<!-- GoatCounter visitor counter-->
<script>
	function removeSpaces(x) {
		return x.replace(/\s/g, '');
	}

	function numberWithCommas(x) {
		return x.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
	}

	// Get current path.
	var get_path = function() {
		var loc = location,
			c = document.querySelector('link[rel="canonical"][href]')
		if (c) {  // May be relative or point to different domain.
			var a = document.createElement('a')
			a.href = c.href
			if (a.hostname.replace(/^www\./, '') === location.hostname.replace(/^www\./, ''))
				loc = a
		}
		return (loc.pathname + loc.search) || '/'
	}

	//visitor counter text before the json is loaded
	document.querySelector('#stats').innerText = "........"

    let r = new XMLHttpRequest();
    r.addEventListener('load', function() {
        document.querySelector('#stats').innerText = numberWithCommas(removeSpaces(JSON.parse(this.responseText).count));
    })

    // Should be exact (encoded) path as it appears in the UI. This uses
    // GoatCounter's count.js
    //let path = window.goatcounter.get_data()['p']

	let path = get_path()

    // Or alternatively, do it manually. Will return HTTP status 404 if the
    // path is not found).
    //let path = location.pathname

    r.open('GET', 'https://counter.rahimali.net/counter/' + encodeURIComponent(path) + '.json')
    r.send()
</script>

<!-- GoatCounter -->
<script data-goatcounter="https://counter.rahimali.net/count"
		async src="/resources/scripts/count.js"></script>
